<% layout('layouts/boilerplate') %>
<div id="cluster-map"></div>
<div class="container">
  <h1>All camps</h1>
  <!-- <div>
    <a href="/camps/new">Add camp</a>
  </div> -->

  <% for(let camp of camps){%>
    <!-- <li><a href="/camps/<%=camp._id%>">
        <%= camp.title %>
      </a></li> -->
    <div class="card mb-3">
      <div class="row">
        <div class="col-md-4">
          <%if(camp.images.length) {%>
            <img src="<%= camp.images[0].url %>" class="img-fluid" alt="">
          <% }else{ %>
            <img src="https://res.cloudinary.com/dimif00uc/image/upload/v1646765671/TravelBee/wvsl01fdlosrp2wu9kuo.jpg" class="img-fluid" alt="">
          <% } %>
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">
              <%= camp.title %>
            </h5>
            <p class="card-text">
              <%= camp.description %>
            </p>
            <p class="card-text">
              <small class="text-muted"><%= camp.location %></small>
            </p>
            <a href="/camps/<%=camp._id%>" class="btn btn-primary">View Camp</a>
          </div>
        </div>
      </div>
    </div>
    <% }%>
  </div>

    <script>
      const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
      const campgrounds = {features: <%- JSON.stringify(camps) %>}
    </script>

<script src="/scripts/clusterMap.js"></script>